// Generated by CoffeeScript 1.7.1
(function() {
  var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

  define(function() {
    var Routes;
    return Routes = (function() {
      function Routes(ds, display) {
        var routes;
        this.ds = ds != null ? ds : {};
        this.display = display;
        this._hideAll = __bind(this._hideAll, this);
        this.signin = __bind(this.signin, this);
        this.post = __bind(this.post, this);
        this.edit = __bind(this.edit, this);
        this.main = __bind(this.main, this);
        routes = {
          '/': this.main,
          '/edit': this.edit,
          '/edit/:id': this.edit,
          '/display/:id': this.post,
          '/signin/': this.signin
        };
        this.router = Router(routes);
        this.router.init();
        return this;
      }

      Routes.prototype.main = function() {
        var $posts;
        $posts = $('.posts');
        this._hideAll();
        $posts.find('article').remove();
        this.display.displayAll();
        $posts.parent().show();
        $posts.find('article').show();
        return this;
      };

      Routes.prototype.edit = function(id) {
        var $editor, post;
        $editor = $('.editor');
        this._hideAll();
        $editor.parent().show();
        if (id != null) {
          post = this.ds.get(id);
          $editor.find('.title').val(post.title);
          $editor.find('.body').val(post.body);
          $editor.find('.author').val(post.author);
          $editor.find('.tags').val(post.tags);
        }
        $editor.show();
        return this;
      };

      Routes.prototype.post = function(id) {
        var $posts;
        $posts = $('.posts');
        this._hideAll();
        $posts.find('article').hide();
        if (id != null) {
          $("#post" + id).parents('.row').show();
          $("#post" + id).show();
        } else {
          this.router.setRoute('/');
        }
        return this;
      };

      Routes.prototype.signin = function() {
        var $signin;
        this._hideAll();
        $signin = $('.signin');
        $signin.parent().show();
        return this;
      };

      Routes.prototype._hideAll = function() {
        return $('.row').hide();
      };

      return Routes;

    })();
  });

}).call(this);
